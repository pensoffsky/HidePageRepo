<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>pagehide listener</title>
</head>
<body>
<h1>pagehide test</h1>
<p>Open DevTools â†’ Network and navigate away from this page.</p>

<button id="sendBtn">Send button request</button>

<script>
    const ENDPOINT = "https://webhook.site/83d8c268-dd19-40a6-8d8f-838b15e5a954";

    function sendText(bodyText) {
      fetch(ENDPOINT, {
        method: "POST",
        headers: {
          "Content-Type": "text/plain"
        },
        body: bodyText,
        keepalive: true
      }).catch(function () {
        // ignore errors
      });
    }

    // Button click request
    document.getElementById("sendBtn").addEventListener("click", function () {
      sendText("Button request");
    });

    // pagehide request
    window.addEventListener("pagehide", function () {
      sendText("pagehide event");
    });
</script>
</body>
</html>
